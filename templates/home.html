<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <meta charset="utf-8" />
    <title>Resume Analyzer Pro</title>
    <style>
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
            background: #f3f5f7;
            margin: 0
        }

        .wrap {
            max-width: 1050px;
            margin: 40px auto;
            padding: 0 18px
        }

        .card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, .08);
            padding: 28px
        }

        .grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 18px;
            margin-top: 16px
        }

        .panel {
            border: 1px solid #eef0f4;
            border-radius: 16px;
            padding: 18px
        }

        label {
            display: block;
            font-size: 13px;
            color: #667085;
            margin: 10px 0 6px
        }

        select {
            width: 100%;
            padding: 12px 12px;
            border-radius: 12px;
            border: 1px solid #e6e7eb;
            outline: none;
            background: #fff
        }

        .btn {
            border: 0;
            border-radius: 14px;
            padding: 12px 14px;
            background: #111;
            color: #fff;
            font-weight: 800;
            cursor: pointer;
            width: 100%;
            margin-top: 16px
        }

        .btn2 {
            border: 0;
            border-radius: 14px;
            padding: 12px 14px;
            background: #eef0f4;
            color: #111;
            font-weight: 800;
            cursor: pointer;
            margin-top: 16px;
            width: 100%
        }

        .muted {
            color: #667085
        }
    </style>
</head>

<body>
    <div class="main-card"></div>
    <div class="wrap">
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:14px;">
                <div>
                    <h1 style="margin:0 0 6px 0;">Resume Analyzer Pro</h1>
                    <div class="muted">Select a target IT role. Then upload your resume to get a role-based match score
                        and skill gap.</div>
                </div>
                <div class="panel" style="padding:10px 14px;border-radius:999px;">
                    <div class="muted" style="font-size:13px;">Role-based Skill Matching</div>
                </div>
            </div>

            <div class="grid">
                <div class="panel">
                    <form id="roleForm" method="GET" action="/analyze">
                        <label>Role</label>
                        <select id="roleSelect" name="role" required>
                            <option value="">Select Role</option>
                            {% for r in roles %}
                            <option value="{{ r }}">{{ r }}</option>
                            {% endfor %}
                        </select>

                        <label>Category</label>
                        <select id="categorySelect" name="category" required disabled>
                            <option value="">Select Category</option>
                        </select>

                        <label>Specialization / Track</label>
                        <select id="trackSelect" name="track" required disabled>
                            <option value="">Select Track</option>
                        </select>

                        <button class="btn" type="submit">Continue</button>
                        <button class="btn2" type="button" id="resetBtn">Reset</button>
                    </form>
                </div>

                <div class="panel">
                    <h3 style="margin-top:0;">How this works</h3>
                    <ul class="muted" style="line-height:1.6;margin-top:8px;">
                        <li>You choose your target role (ex: Developer → Web Developer → Java).</li>
                        <li>The app uses a role blueprint with trending skills.</li>
                        <li>Your resume is compared against the role skills.</li>
                        <li>You get a match score + missing skills to learn.</li>
                    </ul>
                    <div class="muted" style="margin-top:12px;"><b>Tip:</b> Add missing skills to your learning plan and
                        update your resume.</div>
                </div>
            </div>

            <div class="muted" style="display:flex;justify-content:space-between;margin-top:18px;font-size:13px;">
                <div>Built for internship readiness • Skill Gap Analysis</div>
                <div>Upload stays local on your machine</div>
            </div>
        </div>
    </div>

    <script>
        // IMPORTANT: tojson converts Python dict -> valid JS object
        const ROLES = {{ roles_data | tojson }};

        const roleSel = document.getElementById("roleSelect");
        const catSel = document.getElementById("categorySelect");
        const trackSel = document.getElementById("trackSelect");
        const resetBtn = document.getElementById("resetBtn");

        function clearSelect(sel, placeholder) {
            sel.innerHTML = "";
            const opt = document.createElement("option");
            opt.value = "";
            opt.textContent = placeholder;
            sel.appendChild(opt);
        }

        function setOptions(sel, arr) {
            arr.forEach(v => {
                const opt = document.createElement("option");
                opt.value = v;
                opt.textContent = v;
                sel.appendChild(opt);
            });
        }

        roleSel.addEventListener("change", () => {
            const role = roleSel.value;

            clearSelect(catSel, "Select Category");
            clearSelect(trackSel, "Select Track");
            catSel.disabled = true;
            trackSel.disabled = true;

            if (!role || !ROLES[role]) return;

            const categories = Object.keys(ROLES[role] || {});
            setOptions(catSel, categories);
            catSel.disabled = false;
        });

        catSel.addEventListener("change", () => {
            const role = roleSel.value;
            const cat = catSel.value;

            clearSelect(trackSel, "Select Track");
            trackSel.disabled = true;

            if (!role || !cat || !ROLES[role] || !ROLES[role][cat]) return;

            const tracks = Object.keys(ROLES[role][cat] || {});
            setOptions(trackSel, tracks);
            trackSel.disabled = false;
        });

        resetBtn.addEventListener("click", () => {
            roleSel.value = "";
            clearSelect(catSel, "Select Category");
            clearSelect(trackSel, "Select Track");
            catSel.disabled = true;
            trackSel.disabled = true;
        });
    </script>
    <div class="credit">
        Built by <b>J.V. Sri Nikith</b>
    </div>
</body>

</html>